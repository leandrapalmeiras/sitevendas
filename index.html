<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD Simulado</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <h1>Gerenciamento de Usuários (CRUD Simulado)</h1>

        <div class="form-container">
            <h2>Adicionar/Atualizar Usuário</h2>
            <input type="hidden" id="userId">
            <input type="text" id="userName" placeholder="Nome do Usuário" required>
            <input type="email" id="userEmail" placeholder="Email do Usuário" required>
            <button id="saveButton" onclick="salvarUsuario()">Adicionar</button>
        </div>

        <div class="table-container">
            <h2>Lista de Usuários</h2>
            <table id="userTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nome</th>
                        <th>Email</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    </tbody>
            </table>
        </div>
    </div>

    <script>
        // --- Estrutura de Dados (Simulação de um Banco de Dados) ---
        let users = [];
        let nextId = 1;

        // --- Funções CRUD ---

        // CREATE (INSERT) / UPDATE
        function salvarUsuario() {
            const id = document.getElementById('userId').value;
            const name = document.getElementById('userName').value.trim();
            const email = document.getElementById('userEmail').value.trim();
            const saveButton = document.getElementById('saveButton');

            if (!name || !email) {
                alert('Por favor, preencha todos os campos.');
                return;
            }

            if (id) {
                // UPDATE
                const index = users.findIndex(user => user.id === parseInt(id));
                if (index !== -1) {
                    users[index] = { id: parseInt(id), name, email };
                    alert(`Usuário com ID ${id} atualizado com sucesso!`);
                }
                document.getElementById('userId').value = '';
                saveButton.textContent = 'Adicionar';
            } else {
                // CREATE (INSERT)
                const newUser = { id: nextId++, name, email };
                users.push(newUser);
                alert('Usuário adicionado com sucesso!');
            }

            // Limpa o formulário e atualiza a tabela
            document.getElementById('userName').value = '';
            document.getElementById('userEmail').value = '';
            renderTable();
        }

        // READ (SELECT)
        function renderTable() {
            const tableBody = document.querySelector('#userTable tbody');
            tableBody.innerHTML = ''; // Limpa a tabela

            users.forEach(user => {
                const row = tableBody.insertRow();
                row.insertCell().textContent = user.id;
                row.insertCell().textContent = user.name;
                row.insertCell().textContent = user.email;

                const actionsCell = row.insertCell();

                // Botão para carregar dados no formulário (UPDATE)
                const editButton = document.createElement('button');
                editButton.textContent = 'Editar';
                editButton.classList.add('edit-btn');
                editButton.onclick = () => carregarParaEdicao(user.id);
                actionsCell.appendChild(editButton);

                // Botão para DELETE
                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Deletar';
                deleteButton.classList.add('delete-btn');
                deleteButton.onclick = () => deletarUsuario(user.id);
                actionsCell.appendChild(deleteButton);
            });
        }

        // Função auxiliar para carregar dados no formulário para edição
        function carregarParaEdicao(id) {
            const user = users.find(user => user.id === id);
            if (user) {
                document.getElementById('userId').value = user.id;
                document.getElementById('userName').value = user.name;
                document.getElementById('userEmail').value = user.email;
                document.getElementById('saveButton').textContent = 'Atualizar';
            }
        }

        // DELETE
        function deletarUsuario(id) {
            if (confirm(`Tem certeza que deseja deletar o usuário com ID ${id}?`)) {
                users = users.filter(user => user.id !== id);
                alert('Usuário deletado com sucesso!');
                renderTable(); // Atualiza a tabela
            }
        }

        // Inicializa a tabela ao carregar a página
        window.onload = renderTable;

    </script>
</body>
</html>